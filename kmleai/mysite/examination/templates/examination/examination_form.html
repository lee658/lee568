{% extends "indextensorflow/layout.html" %}

{% block content %}
<br>
<br>
<!-- Services Section -->
<div id="examination" class="container">
<div class="row">
<div class="col-md-8">
<h1>진단할 카테고리를 설정해주세요.</h1>
<select id="myselect" onchange="change(this)">
    <option value="0">진단할 병명을 선택하세요.</option>
    <option value="1">급성 바이러스 간염</option>
    <option value="2">만성 바이러스 간염</option>
    <option value="3">알코올성 간질환</option>
    <option value="4">폐렴</option>
    <option value="5">대사성 알칼리증</option>
    <option value="6">대사성 산증</option>
</select>
<br><br>
<div id="select_1" style="display:none;">
    <form action="" method="POST">
        {% csrf_token %}
        <table class="table">
            <input type="hidden" name="val" value="valueOne" />
        	<tr><td>피로</td><td><input type="checkbox" name="fatigue" value="true" /></td></tr>
        	<tr><td>구역,식욕부진</td><td><input type="checkbox" name="nausea" value="true" /></td></tr>
        	<tr><td>복통,간비대,비장비대</td><td><input type="checkbox" name="abdominal pain" value="true" /></td></tr>
            <tr><td>황달,공막황달</td><td><input type="checkbox" name="jaundice" value="true" /></td></tr>
            <tr><td>총 빌리루빈 (단위 mg/dL) (참고치 0.3 – 1.0)</td><td><input type="text" name="totalBilirubin" /></td></tr>
            <tr><td>AST (단위 U/L) (참고치 0 – 40)</td><td><input type="text" name="AST" /></td></tr>
            <tr><td>ALT (단위 U/L) (참고치 0 – 40)</td><td><input type="text" name="ALT" /></td></tr>
            <tr><td>IgM_anti_HAV</td><td><input type="checkbox" name="IgM_anti_HAV" value="true" /></td></tr>
            <tr><td>IgG_anti_HAV</td><td><input type="checkbox" name="IgG_anti_HAV" value="true" /></td></tr>
            <tr><td>HBsAg</td><td><input type="checkbox" name="HBsAg" value="true" /></td></tr>
            <tr><td>IgM_anti_HBc</td><td><input type="checkbox" name="IgM_anti_HBc" value="true" /></td></tr>
            <tr><td>IgG_anti_HBc</td><td><input type="checkbox" name="IgG_anti_HBc" value="true" /></td></tr>
            <tr><td>HBeAg</td><td><input type="checkbox" name="HBeAg" value="true" /></td></tr>
            <tr><td>HBV_DNA</td><td><input type="checkbox" name="HBV_DNA" value="true" /></td></tr>
            <tr><td>Anti_HBs</td><td><input type="checkbox" name="Anti_HBs" value="true" /></td></tr>
            <tr><td>Anti_HCV</td><td><input type="checkbox" name="Anti_HCV" value="true" /></td></tr>
            <tr><td>HCV_RNA</td><td><input type="checkbox" name="HCV_RNA" value="true" /></td></tr>
            <tr><td colspan="2"><input type="submit" value="Submit" class="btn btn-info btn-block"></td></tr>
        </table>
    </form>
</div>
<div id="select_2" style="display:none;">
    <form action="" method="POST">
        {% csrf_token %}
        <table class="table">
            <input type="hidden" name="val" value="valueTwo" />
	        <tr><td>피로</td><td><input type="checkbox" name="fatigue" value="true" /></td></tr>
	        <tr><td>황달</td><td><input type="checkbox" name="jaundice" value="true" /></td></tr>
	        <tr><td>주사 혹은 수혈받은 경력</td><td><input type="checkbox" name="needle" value="true" /></td></tr>
	        <tr><td>관절염</td><td><input type="checkbox" name="arthritis" value="true" /></td></tr>
	        <tr><td>본인 만성 B형 간염</td><td><input type="checkbox" name="selfChronicHepatitisB" value="true" /></td></tr>
	        <tr><td>어머니 만성 B형 간염</td><td><input type="checkbox" name="motherChronicHepatitisB" value="true" /></td></tr>
            <tr><td>총 빌리루빈 (단위 mg/dL) (참고치 0.3 – 1.0)</td><td><input type="text" name="totalBilirubin" /></td></tr>
            <tr><td>AST (단위 U/L) (참고치 0 – 40)</td><td><input type="text" name="AST" /></td></tr>
            <tr><td>ALT (단위 U/L) (참고치 0 – 40)</td><td><input type="text" name="ALT" /></td></tr>
            <tr><td>알부민혈증 (단위 g/dl) (참고치 3.8 – 4.8)</td><td><input type="text" name="albuminemia" /></td></tr>
            <tr><td>프로트롬빈시간 (단위 s) (참고치 12.7 – 15.4)</td><td><input type="text" name="prothrombinTime" /></td></tr>
            <tr><td>IgM_anti_HAV</td><td><input type="checkbox" name="IgM_anti_HAV" /></td></tr>
            <tr><td>IgG_anti_HAV</td><td><input type="checkbox" name="IgG_anti_HAV" /></td></tr>
            <tr><td>HBsAg</td><td><input type="checkbox" name="HBsAg" value="true" /></td></tr>
            <tr><td>HBeAg</td><td><input type="checkbox" name="HBeAg" value="true" /></td></tr>
            <tr><td>Anti_HBe</td><td><input type="checkbox" name="Anti_HBe" value="true" /></td></tr>
            <tr><td>IgM_anti_HBc</td><td><input type="checkbox" name="IgM_anti_HBc" value="true" /></td></tr>
            <tr><td>IgG_anti_HBc</td><td><input type="checkbox" name="IgG_anti_HBc" value="true" /></td></tr>
            <tr><td>HBV_DNA</td><td><input type="checkbox" name="HBV_DNA" value="true" /></td></tr>
            <tr><td>Anti_HBs</td><td><input type="checkbox" name="Anti_HBs" value="true" /></td></tr>
            <tr><td>Anti_HCV</td><td><input type="checkbox" name="Anti_HCV" value="true" /></td></tr>
            <tr><td>HCV_RNA</td><td><input type="checkbox" name="HCV_RNA" value="true" /></td></tr>
            <tr><td colspan="2"><input type="submit" value="Submit" class="btn btn-info btn-block"></td></tr>
        </table>
    </form>
</div>
<div id="select_3" style="display:none;">
    <form action="" method="POST">
        {% csrf_token %}
        <table class="table">
            <input type="hidden" name="val" value="valueThree" />
        	<tr><td>피로</td><td><input type="checkbox" name="fatigue" value="true" /></td></tr>
        	<tr><td>구역,식욕부진</td><td><input type="checkbox" name="nausea" value="true" /></td></tr>
        	<tr><td>복통,간비대,비장비대</td><td><input type="checkbox" name="abdominal pain" value="true" /></td></tr>
            <tr><td>황달,공막황달</td><td><input type="checkbox" name="jaundice" value="true" /></td></tr>
            <tr><td>음주여부</td><td><input type="checkbox" name="alcohol" value="true" /></td></tr>
            <tr><td>총 빌리루빈 (단위 mg/dL)</td><td><input type="text" name="totalBilirubin" /></td></tr>
            <tr><td>AST (단위 U/L) (참고치 0 – 40)</td><td><input type="text" name="AST" /></td></tr>
            <tr><td>ALT (단위 U/L) (참고치 0 – 40)</td><td><input type="text" name="ALT" /></td></tr>
            <tr><td>GGT (단위 U/L) (참고치 11 -63)</td><td><input type="text" name="GGT" /></td></tr>
            <tr><td>프로트롬빈시간 (단위 s) (참고치 12.7 – 15.4)</td><td><input type="text" name="prothrombinTime" /></td></tr>
            <tr><td colspan="2"><input type="submit" value="Submit" class="btn btn-info btn-block"></td></tr>
        </table>
    </form>
</div>
<div id="select_4" style="display:none;">
    <form action="" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <table class="table">
			<tr><td>X-ray 이미지를 삽입하여 주세요. 이미지 명은 <span style="color:red;">testImg.jpg</span>입니다.</td><td>{{ form.as_table }}</td></tr>
            <tr><td colspan="2"><input type="submit" value="Submit" class="btn btn-info btn-block"></td></tr>
        </table>
    </form>
	<p>1. 현재 DATA SET은 2개, 약 100여개의 샘플 밖에 없습니다. 가지고 있는 <strong>데이터 SET 전체의 유사도를 100으로 잡고 유사도를 판별</strong>합니다. 예를 들어 어떤 사진을(가령 사람 사진이나 풍경사진을) 넣어도 유사도의 합은 100이 됩니다.</p>
<p>2. 딥러닝 기술을 이용하기 때문에 <strong>데이터가 많아질 수록 정확도가 올라갑니다. 데이터를 제공해 주실 때마다 AI에게 학습을 시키며 컴퓨터는 그 전보다 정확한 진단을 내릴 수 있게 됩니다.</strong></p>
<p>3. 데이터 제공은 x-ray 사진을 병명별로 만든 폴더 내 jpg파일로 넣어 메일로(paul-lab@naver.com) 보내주시면 데이터 검증 과정을 거친 후 AI에게 학습 시키도록 하겠습니다. <strong style="color:blue;">여러분의 도움 없이 이 프로젝트는 진행될 수 없습니다.</strong></p>
</div>
<div id="select_5" style="display:none;">
    <form action="" method="POST">
        {% csrf_token %}
        <table class="table">
            <input type="hidden" name="val" value="valueFour" />
            <tr><td>고혈압</td><td><input type="checkbox" name="HTN" value="true" /></td></tr>
            <tr><td>PH (참고치 7.35 - 7.45)</td><td><input type="text" name="PH" /></td></tr>
            <tr><td>PaCO2 (단위 mmHg) (참고치 40±2)</td><td><input type="text" name="PaCO2" /></td></tr>
            <tr><td>PaO2 (단위 mmHg)</td><td><input type="text" name="PaO2" /></td></tr>
            <tr><td>혈액 HCO3- (단위 meq/L) (참고치 24±2)</td><td><input type="text" name="bloodHCO3Mi" /></td></tr>
            <tr><td>혈액 Na+ (단위 meq/L) (참고치 135 - 145)</td><td><input type="text" name="bloodNaPl" /></td></tr>
            <tr><td>혈액 K+ (단위 meq/L) (참고치 3.5 - 5.5)</td><td><input type="text" name="bloodKPl" /></td></tr>
            <tr><td>혈액 Cl- (단위 meq/L)</td><td><input type="text" name="bloodClMi" /></td></tr>
            <tr><td>소변 Na+ (단위 meq/L)</td><td><input type="text" name="PeeNaPl" /></td></tr>
            <tr><td>소변 K+ (단위 meq/L)</td><td><input type="text" name="PeeKPl" /></td></tr>
            <tr><td>소변 Cl- (단위 meq/L)</td><td><input type="text" name="PeeClMi" /></td></tr>
            <tr><td>소변 Cr (단위 meq/L)</td><td><input type="text" name="PeeCr" /></td></tr>
            <tr><td>소변 Ca++ (단위 meq/L)</td><td><input type="text" name="PeeCaPlPl" /></td></tr>
            <tr><td colspan="2"><input type="submit" value="Submit" class="btn btn-info btn-block"></td></tr>
        </table>
    </form>
</div>
<div id="select_6" style="display:none;">
    <form action="" method="POST">
        {% csrf_token %}
        <table class="table">
            <input type="hidden" name="val" value="valueFive" />
            <tr><td>PH (참고치 7.35 - 7.45)</td><td><input type="text" name="PH" /></td></tr>
            <tr><td>PaCO2 (단위 mmHg) (참고치 40±2)</td><td><input type="text" name="PaCO2" /></td></tr>
            <tr><td>PaO2 (단위 mmHg)</td><td><input type="text" name="PaO2" /></td></tr>
            <tr><td>혈액 HCO3- (단위 meq/L) (참고치 24±2)</td><td><input type="text" name="bloodHCO3Mi" /></td></tr>
            <tr><td>혈액 Na+ (단위 meq/L) (참고치 135 - 145)</td><td><input type="text" name="bloodNaPl" /></td></tr>
            <tr><td>혈액 K+ (단위 meq/L) (참고치 3.5 - 5.5)</td><td><input type="text" name="bloodKPl" /></td></tr>
            <tr><td>혈액 Cl- (단위 meq/L)</td><td><input type="text" name="bloodClMi" /></td></tr>
            <tr><td>소변 Na+ (단위 meq/L)</td><td><input type="text" name="PeeNaPl" /></td></tr>
            <tr><td>소변 K+ (단위 meq/L)</td><td><input type="text" name="PeeKPl" /></td></tr>
            <tr><td>소변 Cl- (단위 meq/L)</td><td><input type="text" name="PeeClMi" /></td></tr>
            <tr><td colspan="2"><input type="submit" value="Submit" class="btn btn-info btn-block"></td></tr>
        </table>
    </form>
</div>

<!-- <div id="selectedform"></div>
<form action="" method="POST" enctype="multipart/form-data">
{% csrf_token %}
<table>
    {{ form.as_table }}
</table>
<input type="submit">
이미지 분석은 폐렴에서만 작동합니다.
</form>
-->
</div>
<div class="col-md-4">
<h2 style="color:red;">주의사항</h2>
<p>1. 해당 진단 결과의 사용 용도는 문제 풀이 용도로 한정합니다. <strong style="color:red;">어떠한 경우에도 실제 진단에 이용할 수 없으며 오용에 따른 법적책임은 지지 않습니다.</strong></p>
<p>2. 이미지 분석은 폐렴에서만 작동합니다. 이미지 이름은 <strong style="color:red;">testImg.jpg</strong>로 업로드 해주셔야 작동합니다. <strong style="color:red;">업로드한 이미지는 별도로 서버에 저장하지 않습니다.</strong></p>
</div>
</div>
</div>

<div class="container">
<div class="row">
<div class="col-md-12">
<h2 style="color:Blue;">진단 결과</h2>
<p>{{ diagresult.특이사항 }}</p>
<p>{{ diagresult.이유 }}</p>
<p>{{ diagresult.진단 }}</p>
<p>{{ diagresult.치료 }}</p>
</div>
</div>
</div>

<script>
function change(obj){
    if (obj.value == 1) {
        document.getElementById("select_1").style.display = "";
        document.getElementById("select_2").style.display = "none";
        document.getElementById("select_3").style.display = "none";
        document.getElementById("select_4").style.display = "none";
        document.getElementById("select_5").style.display = "none";
        document.getElementById("select_6").style.display = "none";
    } else if (obj.value == 2) {
        document.getElementById("select_1").style.display = "none";
        document.getElementById("select_2").style.display = "";
        document.getElementById("select_3").style.display = "none";
        document.getElementById("select_4").style.display = "none";
        document.getElementById("select_5").style.display = "none";
        document.getElementById("select_6").style.display = "none";
    } else if (obj.value == 3) {
        document.getElementById("select_1").style.display = "none";
        document.getElementById("select_2").style.display = "none";
        document.getElementById("select_3").style.display = "";
        document.getElementById("select_4").style.display = "none";
        document.getElementById("select_5").style.display = "none";
        document.getElementById("select_6").style.display = "none";
    } else if (obj.value == 4) {
        document.getElementById("select_1").style.display = "none";
        document.getElementById("select_2").style.display = "none";
        document.getElementById("select_3").style.display = "none";
        document.getElementById("select_4").style.display = "";
        document.getElementById("select_5").style.display = "none";
        document.getElementById("select_6").style.display = "none";
    } else if (obj.value == 5) {
        document.getElementById("select_1").style.display = "none";
        document.getElementById("select_2").style.display = "none";
        document.getElementById("select_3").style.display = "none";
        document.getElementById("select_4").style.display = "none";
        document.getElementById("select_5").style.display = "";
        document.getElementById("select_6").style.display = "none";
    } else {
        document.getElementById("select_1").style.display = "none";
        document.getElementById("select_2").style.display = "none";
        document.getElementById("select_3").style.display = "none";
        document.getElementById("select_4").style.display = "none";
        document.getElementById("select_5").style.display = "none";
        document.getElementById("select_6").style.display = "";
    }
  }
</script>
{% endblock %}
